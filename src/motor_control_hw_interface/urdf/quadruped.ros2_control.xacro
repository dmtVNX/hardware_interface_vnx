<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:macro name="robstride_ros2_control" params="name prefix">
    <ros2_control name="${name}" type="system">
      
      <!--  Hardware interface plugin -->
      <hardware>
        <plugin>motor_control_hw_interface/RobstrideSystem</plugin>
        <!--  Optional: Control gains -->
        <param name="kp">50.0</param>
        <param name="kd">5.0</param>
      </hardware>

      <!--  Front Left Leg (0x01, 0x02, 0x03) -->
      <joint name="${prefix}fl_hip_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x01</param>
      </joint>

      <joint name="${prefix}fl_thigh_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x02</param>
      </joint>

      <joint name="${prefix}fl_calf_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x03</param>
      </joint>

      <!--  Front Right Leg (0x04, 0x05, 0x06) -->
      <joint name="${prefix}fr_hip_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x04</param>
      </joint>

      <joint name="${prefix}fr_thigh_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x05</param>
      </joint>

      <joint name="${prefix}fr_calf_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x06</param>
      </joint>

      <!--  Rear Left Leg (0x07, 0x08, 0x09) -->
      <joint name="${prefix}rl_hip_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x07</param>
      </joint>

      <joint name="${prefix}rl_thigh_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x08</param>
      </joint>

      <joint name="${prefix}rl_calf_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x09</param>
      </joint>

      <!--  Rear Right Leg (0x0A, 0x0B, 0x0C) -->
      <joint name="${prefix}rr_hip_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x0A</param>
      </joint>

      <joint name="${prefix}rr_thigh_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x0B</param>
      </joint>

      <joint name="${prefix}rr_calf_joint">
        <command_interface name="position"/>
        <command_interface name="velocity"/>
        <command_interface name="effort"/>
        <state_interface name="position"/>
        <state_interface name="velocity"/>
        <state_interface name="effort"/>
        <param name="motor_id">0x0C</param>
      </joint>

    </ros2_control>
  </xacro:macro>

</robot>